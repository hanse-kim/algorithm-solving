# ë„ë„›ê³¼ ë§‰ëŒ€ ê·¸ëž˜í”„ [ðŸ”—](https://programmers.co.kr/learn/courses/30/lessons/258711)

`2024 KAKAO WINTER INTERNSHIP`

## ì²«ë²ˆì§¸ í’€ì´

- ê·¸ëž˜í”„ ì „ì²´ë¥¼ íƒìƒ‰í•˜ë©´ì„œ ê·¸ëž˜í”„ì˜ ëª¨ì–‘ì„ íŒë³„í–ˆë‹¤.

```javascript
const SHAPE_TYPE = {
  DONUT: 1,
  STICK: 2,
  EIGHT: 3,
};

function solution(edges) {
  const graph = {};
  const prevNodeCounts = {};

  edges.forEach(([from, to]) => {
    from = `${from}`;
    to = `${to}`;

    if (!graph[from]) {
      graph[from] = [];
    }

    if (!graph[to]) {
      graph[to] = [];
    }

    if (!prevNodeCounts[to]) {
      prevNodeCounts[to] = 0;
    }

    graph[from].push(to);
    prevNodeCounts[to] += 1;
  });

  const answer = [0, 0, 0, 0];
  const firstNodeCandidates = [];
  const nodes = Object.keys(graph);
  const globalVisited = new Set();

  nodes.forEach((node) => {
    if (!prevNodeCounts[node]) {
      if (graph[node].length > 1) {
        answer[0] = node;
        return;
      } else {
        firstNodeCandidates.push(node);
      }
    }

    const localVisited = new Set();

    while (true) {
      if (globalVisited.has(node) && !localVisited.has(node)) {
        break;
      }

      globalVisited.add(node);

      const nextNodes = graph[node];

      if (nextNodes.length === 0) {
        answer[SHAPE_TYPE.STICK] += 1;
        break;
      }

      if (nextNodes.length === 2 && prevNodeCounts[node] >= 2) {
        answer[SHAPE_TYPE.EIGHT] += 1;
        break;
      }

      if (localVisited.has(node)) {
        answer[SHAPE_TYPE.DONUT] += 1;
        break;
      } else {
        localVisited.add(node);
      }

      node = nextNodes[0];
    }
  });

  if (!answer[0]) {
    if (firstNodeCandidates.length === 1) {
      answer[0] = firstNodeCandidates[0];
    } else {
      answer[0] = firstNodeCandidates.filter((candidate) => {
        const nextNode = graph[node][0];
        return prevNodeCounts[nextNode] !== 1;
      })[0];
    }
  }

  answer[0] = Number(answer[0]);

  return answer;
}
```

## ë‘ë²ˆì§¸ í’€ì´

ë¬¸ì œë¥¼ ìž˜ ì½ì–´ë³´ë©´ ê·¸ëž˜í”„ íƒìƒ‰ì„ í•  í•„ìš”ê°€ ì—†ì—ˆë‹¤...

ë„ë„›, ë§‰ëŒ€, 8ìž ê·¸ëž˜í”„ì˜ ìˆ˜ì˜ í•©ì€ 2 ì´ìƒì´ë©° ëª¨ë“  ê·¸ëž˜í”„ëŠ” ìƒì„±í•œ ì •ì ìœ¼ë¡œë¶€í„° ìµœì†Œ í•˜ë‚˜ ì´ìƒì˜ ê°„ì„ ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìžˆê¸° ë•Œë¬¸ì— ì•„ëž˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ë‹µì„ êµ¬í•  ìˆ˜ ìžˆë‹¤.

- ì˜¤ëŠ” ê°„ì„ ì´ ì—†ìœ¼ë©° ê°€ëŠ” ê°„ì„ ì´ 2 ì´ìƒì¸ ì •ì ì´ ìƒì„±ëœ ì •ì ì´ë‹¤.
- ì˜¤ëŠ” ê°„ì„ ì´ 2 ì´ìƒ, ê°€ëŠ” ê°„ì„ ì´ 2ì¸ ì •ì ì´ ìžˆìœ¼ë©´ 8ìž ê·¸ëž˜í”„ì˜ ìˆ˜ + 1
- ê°€ëŠ” ê°„ì„ ì´ ì—†ëŠ” ì •ì ì´ ìžˆìœ¼ë©´ ë§‰ëŒ€ ê·¸ëž˜í”„ì˜ ìˆ˜ + 1
- ë„ë„› ê·¸ëž˜í”„ì˜ ìˆ˜ = ì „ì²´ ê·¸ëž˜í”„ì˜ ìˆ˜ - (8ìž ê·¸ëž˜í”„ì˜ ìˆ˜ + ë§‰ëŒ€ ê·¸ëž˜í”„ì˜ ìˆ˜)
- ì „ì²´ ê·¸ëž˜í”„ì˜ ìˆ˜ëŠ” ìƒì„±ëœ ì •ì ì—ì„œ ê°€ëŠ” ê°„ì„ ì˜ ê°¯ìˆ˜ì´ë‹¤.

```javascript
const CREATED_NODE = 0;

const SHAPE_TYPE = {
  DONUT: 1,
  STICK: 2,
  EIGHT: 3,
};

function solution(edges) {
  const edgeCountsMap = {};

  edges.forEach(([from, to]) => {
    edgeCountsMap[from] = edgeCountsMap[from] ?? { in: 0, out: 0 };
    edgeCountsMap[to] = edgeCountsMap[to] ?? { in: 0, out: 0 };

    edgeCountsMap[from].out += 1;
    edgeCountsMap[to].in += 1;
  });

  const answer = [0, 0, 0, 0];

  Object.entries(edgeCountsMap).forEach(([node, counts]) => {
    if (counts.in === 0 && counts.out >= 2) {
      answer[CREATED_NODE] = Number(node);
      return;
    }

    if (counts.out === 0) {
      answer[SHAPE_TYPE.STICK] += 1;
      return;
    }

    if (counts.in >= 2 && counts.out === 2) {
      answer[SHAPE_TYPE.EIGHT] += 1;
      return;
    }
  });

  answer[SHAPE_TYPE.DONUT] =
    edgeCountsMap[answer[CREATED_NODE]].out -
    (answer[SHAPE_TYPE.STICK] + answer[SHAPE_TYPE.EIGHT]);

  return answer;
}
```
