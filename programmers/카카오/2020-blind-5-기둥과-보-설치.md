## 2020 ì¹´ì¹´ì˜¤ ë¸”ë¼ì¸ë“œ ì±„ìš© - ê¸°ë‘¥ê³¼ ë³´ ì„¤ì¹˜ [ğŸ”—](https://programmers.co.kr/learn/courses/30/lessons/60061)

 ### í’€ì´1

ì¢Œí‘œê³„ ê° ì ë³„ë¡œ ìœ„, ì•„ë˜, ì™¼ìª½, ì˜¤ë¥¸ìª½ìœ¼ë¡œ êµ¬ì¡°ë¬¼ì´ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê°±ì‹ í•˜ê³  í™•ì¸í•œë‹¤.

```python
import collections

def solution(n, build_frame):
    UP = 0
    DOWN = 1
    LEFT = 2
    RIGHT = 3
    
    def new_point():
        return {
            UP: False,
            DOWN: False,
            LEFT: False,
            RIGHT: False
        }
        
    def translation(origin, operand):
        return (origin[0] + operand[0], origin[1] + operand[1])
    
    def add_column(position):
        origin = plane[position]
        top = plane[translation(position, (0, 1))]
        buildable = 0
        if position[1] != 0: # ë°”ë‹¥ì´ ì•„ë‹Œ ê²½ìš°
            if origin[LEFT] or origin[RIGHT]:
                buildable += 1
            if origin[DOWN]:
                buildable += 1
        else: # ë°”ë‹¥ì¸ ê²½ìš°
            buildable += 1
        
        if buildable == 0:
            return # ì„¤ì¹˜ ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•œ ê²½ìš°
        
        origin[UP] = True
        top[DOWN] = True
        
    def add_beam(position):
        origin = plane[position]
        right = plane[translation(position, (1, 0))]
        buildable = 0
        
        buildable += 1 if origin[LEFT] and right[RIGHT] else 0
        buildable += 1 if origin[DOWN] or right[DOWN] else 0
        
        if buildable == 0:
            return # ì„¤ì¹˜ ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•œ ê²½ìš°
        
        origin[RIGHT] = True
        right[LEFT] = True
    
    def remove_column(position):
        origin = plane[position]
        top = plane[translation(position, (0, 1))]
        
        if (not top[LEFT] and not top[RIGHT]) and top[UP]:
            return # ê¸°ë‘¥ ìœ„ ì–‘ìª½ì— ë³´ê°€ ì—†ê³  ê¸°ë‘¥ì´ ìˆì„ ê²½ìš°
        
        if top[LEFT]:
            top_left = plane[translation(position, (-1, 1))]
            if not (top_left[LEFT] and top[RIGHT]) and not top_left[DOWN]:
                return # ì‚­ì œí•˜ë©´ ì™¼ìª½ ìœ„ ë³´ê°€ ì„¤ì¹˜ì¡°ê±´ì„ ì¶©ì¡± ëª»í•  ê²½ìš°
        
        if top[RIGHT]:
            top_right = plane[translation(position, (1, 1))]
            if not (top_right[RIGHT] and top[LEFT]) and not top_right[DOWN]:
                return # ì‚­ì œí•˜ë©´ ì˜¤ë¥¸ìª½ ìœ„ ë³´ê°€ ì„¤ì¹˜ì¡°ê±´ì„ ì¶©ì¡± ëª»í•  ê²½ìš°
        
        origin[UP] = False
        top[DOWN] = False
    
    def remove_beam(position):
        origin = plane[position]
        right = plane[translation(position, (1, 0))]
        
        if (origin[UP] and (not origin[DOWN] and not origin[LEFT])) or \
            (right[UP] and (not right[DOWN] and not right[RIGHT])):
            return # ì‚­ì œí•˜ë©´ ë³´ ì–‘ìª½ ê¸°ë‘¥ì´ ì„¤ì¹˜ì¡°ê±´ì„ ì¶©ì¡± ëª»í•  ê²½ìš°
        
        if origin[LEFT]:
            left = plane[translation(position, (-1, 0))]
            if not left[DOWN] and not origin[DOWN]:
                return # ì‚­ì œí•˜ë©´ ì™¼ìª½ ë³´ê°€ ì„¤ì¹˜ì¡°ê±´ì„ ì¶©ì¡± ëª»í•  ê²½ìš°
        
        if right[RIGHT]:
            right_right = plane[translation(position, (2, 0))]
            if not right_right[DOWN] and not right[DOWN]:
                return # ì‚­ì œí•˜ë©´ ì˜¤ë¥¸ìª½ ë³´ê°€ ì„¤ì¹˜ì¡°ê±´ì„ ì¶©ì¡± ëª»í•  ê²½ìš°
        
        origin[RIGHT] = False
        right[LEFT] = False
    
    def get_result():
        result = []
        for position in sorted(plane):
            origin = plane[position]
            if origin[UP]:
                result.append([*position, 0])
            if origin[RIGHT]:
                result.append([*position, 1])
        
        return result
        
    plane = collections.defaultdict(new_point)
    
    for x, y, frame, is_add in build_frame:
        position = (x, y)
        if is_add:
            if frame == 0:
                add_column(position)
            else:
                add_beam(position)
        else:
            if frame == 0:
                remove_column(position)
            else:
                remove_beam(position)
            
    return get_result()
```

### í’€ì´2

ê° ë³´ì™€ ê¸°ë‘¥ì„ (x, y, ë³´orê¸°ë‘¥ ì—¬ë¶€)ì˜ íŠœí”Œë¡œ ë§Œë“¤ì–´ì„œ ì§‘í•©ìœ¼ë¡œ ì €ì¥í•œë‹¤.

ì¶”ê°€ ì‹œì—” í•´ë‹¹ ë³´ ë˜ëŠ” ê¸°ë‘¥ì´, ì‚­ì œ ì‹œì—” í•´ë‹¹ ë³´ ë˜ëŠ” ê¸°ë‘¥ì´ ì‚­ì œë¨ìœ¼ë¡œì¨ ì˜í–¥ì„ ë°›ëŠ” ë³´ì™€ ê¸°ë‘¥ë“¤ì„ ì²´í¬í•˜ê³ , ì¶”ê°€/ì‚­ì œí•´ë„ ë¬¸ì œê°€ ì—†ë‹¤ë©´ ì‹¤ì œë¡œ ìˆ˜í–‰í•œë‹¤.

```python
def solution(n, build_frame):
    def translation(origin, operand):
        return (origin[0] + operand[0], origin[1] + operand[1])
    
    def is_valid_column(column, plane) -> bool:
        bottom = column[:2]
        if bottom[1] == 0:
            return True # ë°”ë‹¥ ìœ„
        
        if (*translation(bottom, (-1, 0)), 1) in plane or \
            (*bottom, 1) in plane:
            return True # ë³´ì˜ í•œìª½ ë ìœ„
        
        if (*translation(bottom, (0,-1)), 0) in plane:
            return True # ë‹¤ë¥¸ ê¸°ë‘¥ ìœ„
        
        return False
        
    def is_valid_beam(beam, plane) -> bool:
        left = beam[:2]
        right = translation(left, (1, 0))
        if (*translation(left, (0,-1)), 0) in plane or \
            (*translation(right, (0,-1)), 0) in plane:
            return True # ë³´ í•œìª½ ì•„ë˜ì— ê¸°ë‘¥ ìˆìŒ
        
        if (*translation(left, (-1, 0)), 1) in plane and \
            (*right, 1) in plane:
            return True # ì–‘ìª½ì— ë³´ ìˆìŒ
        
        return False
    
    def is_valid_frame(frame, plane):
        return is_valid_column(frame, plane) if frame[-1] == 0 else \
    		is_valid_beam(frame, plane)
    
    def add_frame(frame):
        if is_valid_frame(frame, plane):
            plane.add(frame)
    
    def remove_frame(frame):
        tmp_plane = plane - {frame}
        position = frame[:2]
        if frame[-1] == 0:
            checklist = (
                (*translation(position, (-1, 1)), 1),
                (*translation(position, (0, 1)), 1),
                (*translation(position, (0, 1)), 0)
            )
        else:
            checklist = (
                (*position, 0),
                (*translation(position, (-1, 0)), 1),
                (*translation(position, (1, 0)), 0),
                (*translation(position, (1, 0)), 1)
            )
        for item in checklist:
            if item in tmp_plane and not is_valid_frame(item, tmp_plane):
                return
        
        plane.remove(frame)
    
    plane = set()
    for x, y, frame_type, is_add in build_frame:
        frame = (x,y,frame_type)
        if is_add:
            add_frame(frame)
        else:
            remove_frame(frame)
    
    return sorted(list(plane))
```

